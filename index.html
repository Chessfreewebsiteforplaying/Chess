<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bàn Cờ Vua với Lichess API</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #chess-board { display: grid; grid-template-columns: repeat(8, 50px); }
        #chess-board div { width: 50px; height: 50px; }
        #chess-board .black { background-color: #666; }
        #chess-board .white { background-color: #fff; }
        button { margin: 10px; padding: 10px; font-size: 16px; }
    </style>
</head>
<body>
    <h1>Bàn Cờ Vua với Lichess API</h1>
    <button id="get-game">Nhập ID Trò Chơi Lichess</button>
    <pre id="output"></pre>
    <div id="chess-board"></div>

    <script>
        const output = document.getElementById('output');
        const chessBoard = document.getElementById('chess-board');

        // Function to create a chessboard
        function createChessBoard() {
            chessBoard.innerHTML = ''; // Clear existing board
            for (let i = 0; i < 8; i++) {
                for (let j = 0; j < 8; j++) {
                    const square = document.createElement('div');
                    square.className = (i + j) % 2 === 0 ? 'white' : 'black';
                    chessBoard.appendChild(square);
                }
            }
        }

        // Fetch game state from Lichess API
        async function fetchGame(gameId) {
            try {
                const response = await fetch(`https://lichess.org/api/game/state/${gameId}`);
                if (!response.ok) throw new Error('Không thể tải trạng thái trò chơi');

                const gameData = await response.json();
                output.textContent = JSON.stringify(gameData, null, 2);

                // Kiểm tra xem Lichess API có chạy không
                console.log("Lichess API đã chạy thành công!", gameData); // Hiển thị thông báo thành công

                // Cập nhật bảng cờ dựa trên dữ liệu trò chơi nếu cần
                // Ví dụ: bạn có thể phân tích các vị trí và thêm quân cờ lên bảng

            } catch (error) {
                output.textContent = error.message;
                console.log("Lỗi khi gọi Lichess API:", error); // Hiển thị thông báo lỗi
            }
        }

        // Event listener for button click
        document.getElementById('get-game').onclick = function() {
            const gameId = prompt("Nhập ID trò chơi Lichess:"); // Hộp thoại nhập ID
            if (gameId) {
                fetchGame(gameId); // Fetch the game state
            } else {
                alert("Vui lòng nhập ID trò chơi."); // Thông báo nếu không có ID
            }
        };

        // Create initial chessboard
        createChessBoard();
    </script>
</body>
</html>
